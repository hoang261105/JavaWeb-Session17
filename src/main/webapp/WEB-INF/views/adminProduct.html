<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<div th:fragment="content">
    <h1 class="text-2xl font-bold mb-4">üì¶ Danh s√°ch s·∫£n ph·∫©m</h1>

    <div class="flex justify-between items-center mb-4 gap-4">
        <!-- Form l·ªçc -->
        <form method="get" action="search" class="flex items-center gap-2 w-1/2">
            <input type="text" name="productName" placeholder="T√¨m ki·∫øm s·∫£n ph·∫©m..."
                   class="flex-1 px-4 py-2 border rounded" />
            <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">
                L·ªçc
            </button>
        </form>

        <!-- N√∫t th√™m m·ªõi -->
        <div class="w-1/2 flex justify-end">
            <a href="add-product" class="bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700">
                Th√™m m·ªõi s·∫£n ph·∫©m
            </a>
        </div>
    </div>

    <!-- B·∫£ng s·∫£n ph·∫©m -->
    <div class="overflow-x-auto">
        <table class="w-full bg-white shadow-md rounded">
            <thead class="bg-gray-200">
            <tr>
                <th class="py-2 px-4 border">STT</th>
                <th class="py-2 px-4 border">T√™n s·∫£n ph·∫©m</th>
                <th class="py-2 px-4 border">M√¥ t·∫£</th>
                <th class="py-2 px-4 border">Gi√°</th>
                <th class="py-2 px-4 border">T·ªìn kho</th>
                <th class="py-2 px-4 border">H√¨nh ·∫£nh</th>
                <th class="py-2 px-4 border">H√†nh ƒë·ªông</th>
            </tr>
            </thead>
            <tbody>
                <tr th:if="${#lists.isEmpty(products)}" class="hover:bg-gray-100 text-center">
                    <td class="py-2 px-4 border" th:text="${message}" colspan="7"></td>
                </tr>

                <tr th:each="product, loop : ${products}" class="hover:bg-gray-100 text-center">
                    <td class="py-2 px-4 border" th:text="${(currentPage - 1) * pageSize + loop.index + 1}">1</td>
                    <td class="py-2 px-4 border" th:text="${product.productName}">T√™n</td>
                    <td class="py-2 px-4 border" th:text="${product.description}">M√¥ t·∫£</td>
                    <td class="py-2 px-4 border" th:text="${product.price}">0.00</td>
                    <td class="py-2 px-4 border" th:text="${product.stock}">10</td>
                    <td class="py-2 px-4 border">
                        <img th:src="${product.image}" alt="image" class="w-16 h-16 object-cover rounded">
                    </td>
                    <td class="py-2 px-4 border">
                        <div class="flex justify-center gap-2">
                            <!-- N√∫t S·ª≠a -->
                            <form th:action="@{'/editProduct/' + ${product.productId}}" method="get">
                                <button type="submit"
                                        class="bg-yellow-500 text-white px-3 py-1 rounded hover:bg-yellow-600">
                                    S·ª≠a
                                </button>
                            </form>

                            <!-- N√∫t X√≥a -->
                            <form th:action="@{'/deleteProduct/' + ${product.productId}}" method="post"
                                  onsubmit="return confirm('B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a s·∫£n ph·∫©m n√†y?');">
                                <button type="submit"
                                        class="bg-red-600 text-white px-3 py-1 rounded hover:bg-red-700">
                                    X√≥a
                                </button>
                            </form>
                        </div>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>


    <!-- Ph√¢n trang -->
    <div class="mt-10 flex justify-center">
        <nav class="flex space-x-1" aria-label="Pagination">

            <a th:if="${currentPage > 1}"
               th:href="@{/search(page=${currentPage - 1}, productName=${productName})}"
               class="px-4 py-2 border border-gray-300 bg-white text-gray-700 hover:bg-gray-100 rounded-l-md">
                Tr∆∞·ªõc
            </a>


            <a th:each="i : ${#numbers.sequence(1, totalPages)}"
               th:href="@{/search(page=${i}, productName=${productName})}"
               th:text="${i}"
               th:classappend="${i == currentPage} ? 'bg-blue-500 text-white' : 'bg-white text-gray-700 hover:bg-gray-100'"
               class="px-4 py-2 border border-gray-300">
            </a>


            <a th:if="${currentPage < totalPages}"
               th:href="@{/search(page=${currentPage + 1}, productName=${productName})}"
               class="px-4 py-2 border border-gray-300 bg-white text-gray-700 hover:bg-gray-100 rounded-r-md">
                Ti·∫øp
            </a>
        </nav>
    </div>
</div>
</body>

</html>